<UserControl x:Class="A1RConsole.Views.Invoicing.InvoicingView"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
             xmlns:Core="clr-namespace:A1RConsole.Core" 
             xmlns:Behaviors="clr-namespace:A1RConsole.Core"
             xmlns:currency="clr-namespace:CurrencyTextBoxControl;assembly=CurrencyTextBoxControl"
             mc:Ignorable="d" 
             d:DesignWidth="1050" d:DesignHeight="800">
    <UserControl.Resources>
        <Style x:Key="TextBlockStyle" TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding (Validation.Errors).CurrentItem.ErrorContent, RelativeSource={RelativeSource Self}}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <Grid Background="White" Height="800">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="243*"/>
            <ColumnDefinition Width="140*"/>
            <ColumnDefinition Width="140*"/>
            <ColumnDefinition Width="347*"/>
            <ColumnDefinition Width="180*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Background="#FF938F8F" Foreground="White" Padding="0,3,0,0" Margin="0,38,0,0" TextWrapping="Wrap" Text="Invoicing" TextAlignment="Center" FontWeight="Bold" FontSize="20" FontFamily="Arial" Height="32" VerticalAlignment="Top" Grid.ColumnSpan="5"/>
        <Border BorderBrush="#FFC5D0EE" Margin="5,240,6,314"  BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.ColumnSpan="5" >
            <DataGrid x:Name="dgQuoteDetails1_Copy1"  BorderBrush="#FFE0E0E0" HorizontalGridLinesBrush="#FF9C9C9C" VerticalGridLinesBrush="#FF9C9C9C" HorizontalScrollBarVisibility="Disabled" FontFamily="Verdana" 
			ItemsSource="{Binding Invoice.SalesOrderDetails, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" GotFocus="DataGrid_CellGotFocus" 
			AutoGenerateColumns="False" Margin="1,1,1,1" Background="#e1e9f7"  TabIndex="7" BorderThickness="0" CanUserAddRows="False" >
                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"  Color="#FF8F8F8F"/>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <!-- Order Qty -->
                    <DataGridTextColumn Header="Line No" Width="auto" IsReadOnly="True" Binding="{Binding OrderLine, Mode=TwoWay}" >
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <!-- Product Code -->
                    <DataGridTextColumn Header="Product Code" Width="170" IsReadOnly="True" Binding="{Binding Product.ProductCode, Mode=TwoWay}" >
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Left" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <!--<DataGridTemplateColumn  Width="170" Header="Product Code">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox
								ItemsSource="{Binding DataContext.Product, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
								DisplayMemberPath="ProductCode"
								SelectedItem="{Binding Product, Mode=TwoWay, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}"
								SelectedValue="{Binding Product.ProductCode}"
								SelectedValuePath="ProductCode" 
								IsEditable="True" >
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="SelectionChanged" >
                                        <i:InvokeCommandAction Command="{Binding DataContext.SelectionChangedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox
								ItemsSource="{Binding DataContext.Product, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
								DisplayMemberPath="ProductCode"
								SelectedItem="{Binding Product, Mode=TwoWay, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}"
								SelectedValue="{Binding Product.ProductCode}"
								SelectedValuePath="ProductCode"
								IsEditable="True">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="SelectionChanged" >
                                        <i:InvokeCommandAction Command="{Binding DataContext.SelectionChangedCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>-->
                    <!-- Product Description -->
                    <DataGridTextColumn Header="Description" Width="*" IsReadOnly="True" Binding="{Binding Product.ProductDescription, Mode=TwoWay}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Left" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <!-- Shipped -->
                    <DataGridTextColumn Header="Shipped Qty" Width="auto" IsReadOnly="True" Binding="{Binding Quantity, Mode=TwoWay}" >
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <!-- Type -->
                    <DataGridTextColumn Binding="{Binding Product.ProductUnit}" Width="auto" IsReadOnly="True" Header="Unit">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>

                    </DataGridTextColumn>
                    <!-- Price -->
                    <DataGridTextColumn Binding="{Binding Product.UnitPrice,StringFormat={}${0}}" Width="110" IsReadOnly="True" Header=" List Price" >
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="HorizontalAlignment" Value="Right" />
                                <Setter Property="Padding" Value="4,7,2,0" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <!--<DataGridTemplateColumn  Width="100" Header=" List Price" IsReadOnly="True">
                        <DataGridTemplateColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTemplateColumn.HeaderStyle>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Style="{StaticResource ResourceKey=TextBlockStyle}"  TextAlignment="Right" Padding="4,4,0,0" >
                                    <Run Text="$"/>
                                    <Run Text="{Binding Product.UnitPrice, UpdateSourceTrigger=PropertyChanged}"/>                                  
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>                       
                    </DataGridTemplateColumn>-->
                    <!-- Discount -->
                    <DataGridTemplateColumn  Width="Auto" Header="Discount" IsReadOnly="False">
                        <DataGridTemplateColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTemplateColumn.HeaderStyle>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Style="{StaticResource ResourceKey=TextBlockStyle}" Text="{Binding Discount, UpdateSourceTrigger=PropertyChanged}"  TextAlignment="Right" Padding="4,7,2,0" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <TextBox  Text="{Binding Discount, UpdateSourceTrigger=PropertyChanged}" Padding="4,7,2,0" >
                                    <i:Interaction.Behaviors>
                                        <Behaviors:TextBoxInputBehavior InputMode="DigitInput" JustPositivDecimalInput="false" />
                                    </i:Interaction.Behaviors>
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="KeyUp" >
                                            <i:InvokeCommandAction Command="{Binding DataContext.LostFocusCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </TextBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <!-- Total -->
                    <!--<DataGridTextColumn Binding="{Binding Total}" Width="100" IsReadOnly="True" Header="Total" >
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Padding" Value="5" />
                                <Setter Property="TextAlignment" Value="Right" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Medium" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>-->
                    <DataGridTemplateColumn  Width="120" Header="Total" IsReadOnly="True">
                        <DataGridTemplateColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment"  Value="Center" />
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="FontWeight" Value="Bold" />

                            </Style>
                        </DataGridTemplateColumn.HeaderStyle>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <currency:CurrencyTextBox IsReadOnly="True" IsEnabled="False"  Number="{Binding Total, UpdateSourceTrigger=PropertyChanged}" FontSize="13" FontWeight="Medium" Padding="5" TextAlignment="Right">
                                    <i:Interaction.Behaviors>
                                        <Behaviors:TextBoxInputBehavior InputMode="DecimalInput" JustPositivDecimalInput="false" />
                                    </i:Interaction.Behaviors>
                                </currency:CurrencyTextBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>

                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <Grid Margin="0,0,3,169" HorizontalAlignment="Right" Width="331" Height="145" VerticalAlignment="Bottom" Grid.Column="3" Grid.ColumnSpan="2">
            <Border  HorizontalAlignment="Right" Margin="0,0,3,2" Width="325" Height="142" VerticalAlignment="Bottom" Background="White" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" />
            <TextBlock Margin="0,0,176,6" Padding="0,10,5,0" TextAlignment="Right" FontSize="20" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" HorizontalAlignment="Right" Width="149" Height="42" VerticalAlignment="Bottom"><Run Text="Total Amount"/></TextBlock>
            <TextBlock Margin="0,0,7,6" Padding="0,10,5,0" TextAlignment="Right" FontSize="20" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" HorizontalAlignment="Right" Width="165" Height="42" VerticalAlignment="Bottom"><Run Text="{Binding Invoice.TotalAmount, StringFormat=\{0:c\}}"/></TextBlock>
            <TextBlock Margin="0,0,176,112" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" Width="149" HorizontalAlignment="Right"><Run Text="Total Before Tax"/></TextBlock>
            <TextBlock Margin="0,0,7,112" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="165"><Run Text="{Binding Invoice.ListPriceTotal, StringFormat=\{0:c\}}"/></TextBlock>
            <TextBlock Margin="0,0,176,50" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="149"><Run Text="GST"/></TextBlock>
            <TextBlock Margin="0,0,7,50" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="165"><Run Text="{Binding Invoice.GST, StringFormat=\{0:c\}}"/></TextBlock>
            <TextBlock Margin="0,0,176,80" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="149"><Run Text="Freight"/></TextBlock>
            <TextBlock Margin="0,0,7,80" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="165"><Run Text="{Binding Invoice.FreightTotal, StringFormat=\{0:c\}}"/></TextBlock>
            <CheckBox Content="GST Enabled" IsChecked="{Binding GSTActive, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Height="15" VerticalAlignment="Top" Width="72" FontSize="10" Padding="0" Margin="0,79,214,0" IsEnabled="False" />
        </Grid>
        <Grid Grid.ColumnSpan="2" Grid.Column="3" Margin="0,768,6,10" HorizontalAlignment="Right" Width="263">
            <Button Content="CLOSE" Command="{Binding CloseCommand}" HorizontalAlignment="Right" Width="85" Height="22" FontWeight="Bold" VerticalAlignment="Top" ToolTip="Close this form" />
            <Button Content="INVOICE" Visibility="{Binding InvoiceBtnVisiblity}" Command="{Binding CreateInvoiceCommand}" Margin="0,0,88,0" HorizontalAlignment="Right" FontWeight="Bold" Width="85" Height="22" VerticalAlignment="Top"  ToolTip="Create Invoice" />
            <!--<Button Content="PRINT LABELS" Command="{Binding PrintLabelsCommand}" IsEnabled="{Binding PrintLabelEnDis}" Margin="0,0,176,0" HorizontalAlignment="Right" FontWeight="Bold" Width="85" Height="22" VerticalAlignment="Top" ToolTip="Print address labels"/>-->
            <!--<Button Content="UPDATE" Command="{Binding UpdateCommand}" IsEnabled="{Binding UpdateEnDis}" Margin="0,0,263,0" HorizontalAlignment="Right" FontWeight="Bold" Width="85" Height="22" VerticalAlignment="Top"/>-->
            <!--<Button Content="CANCEL" Command="{Binding CancelOrderCommand}" IsEnabled="{Binding CancelEnDis}" Visibility="{Binding CancelVisibility}" Margin="0,0,87,0" HorizontalAlignment="Right" FontWeight="Bold" Width="85" Height="22" VerticalAlignment="Top"  />-->

            <!--<Button Content="APPROVE" Command="{Binding ApproveCommand}" Visibility="{Binding ApproveVisibility}" Margin="0,0,87,0" HorizontalAlignment="Right" FontWeight="Bold" Width="85" Height="22" VerticalAlignment="Top"/>-->

        </Grid>
        <Border Margin="2,74,0,0" Height="164" VerticalAlignment="Top" Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.Column="1" >
            <TextBox Height="133" TabIndex="6" Margin="1,29,1,0" TextWrapping="Wrap" ScrollViewer.VerticalScrollBarVisibility="Auto" Text="{Binding Invoice.BillTo}" VerticalAlignment="Top" AcceptsReturn="True"  SpellCheck.IsEnabled="True" BorderThickness="0" IsReadOnly="True"  />
        </Border>
        <Label  Content="Sold To" Margin="5,78,0,0" FontFamily="Verdana" Height="32" VerticalAlignment="Top" HorizontalAlignment="Left" Width="54" Grid.Column="1"  />
        <Border Margin="3,74,2,0" Height="164" VerticalAlignment="Top" Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.Column="2" >
            <TextBox TabIndex="6" Margin="1,30,2,0" TextWrapping="Wrap" ScrollViewer.VerticalScrollBarVisibility="Auto" Text="{Binding Invoice.ShipTo}" AcceptsReturn="True"  SpellCheck.IsEnabled="True" BorderThickness="0" IsReadOnly="True" />
        </Border>
        <Label  Content="Ship To" Margin="3,76,0,0" FontFamily="Verdana" Height="32" VerticalAlignment="Top" HorizontalAlignment="Left" Width="54" Grid.Column="2"  />
        <Grid Margin="6,74,1,0" Height="167" VerticalAlignment="Top">
            <Border Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Margin="0,0,0,3" >
                <TextBox Height="23" Margin="142,8,1,0" Padding="0,3,0,0"  IsReadOnly="True" TextWrapping="Wrap" Text="{Binding Invoice.OrderDate, StringFormat=dd/MM/yyyy}" VerticalAlignment="Top" />
            </Border>
            <Label  Content="Customer Name" Margin="-1,34,0,0" FontFamily="Verdana"  Height="23" VerticalAlignment="Top" HorizontalAlignment="Left" Width="124"  />
            <TextBox x:Name="cmbCustomers"         		
        		TabIndex="3"          	  
        		Text="{Binding Invoice.Customer.CompanyName}" IsReadOnly="True" Padding="0,3,0,0"              	
        		Background="White" Foreground="Black" FontFamily="Verdana" Margin="144,34,3,0" Height="23" VerticalAlignment="Top" />
            <Label  Content="Order Action" Margin="-1,106,0,0" FontFamily="Verdana" Height="23 " VerticalAlignment="Top" HorizontalAlignment="Left" Width="124"  />
            <TextBox 
        		x:Name="cmbDispatchTime_Copy"
        		TabIndex="5" IsReadOnly="True" Padding="0,3,0,0"           		
        		Foreground="Black" Background="White" FontFamily="Verdana" Margin="144,106,10,0" Height="23" VerticalAlignment="Top" Text="{Binding Invoice.OrderAction}" />
            <Label  Content="Dispatched Date" Margin="-1,81,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" HorizontalAlignment="Left" Width="147"  />
            <TextBox                  
        		Text="{Binding Invoice.DispatchOrder.DispatchedDate, StringFormat=dd/MM/yyyy}"
        		Margin="144,82,56,0" IsReadOnly="True" Padding="0,3,0,0"  
        		TabIndex="7" Height="23" VerticalAlignment="Top"/>
            <Label  Content="Customer Order No" Margin="-1,58,0,0" FontFamily="Verdana" Height="23" VerticalAlignment="Top" HorizontalAlignment="Left" Width="129"  />
            <TextBox x:Name="txtTermsID_Copy1" TabIndex="4" Height="23" Margin="144,58,56,0" TextWrapping="Wrap" IsReadOnly="True" Text="{Binding Invoice.CustomerOrderNo}" VerticalAlignment="Top"  Background="White" />
            <Label  Content="Invoice Date" Margin="0,126,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" HorizontalAlignment="Left" Width="105"  />
            <DatePicker DisplayDateStart="{Binding CurrentDate}"
        	SelectedDate="{Binding SelectedInvoiceDate}" IsEnabled="{Binding InvoiceDateEnabled}"
        	Margin="144,131,-10,0" 
        	TabIndex="7" Height="23" VerticalAlignment="Top" HorizontalAlignment="Left" Width="102"/>

        </Grid>
        <Border Margin="1,73,6,0" Height="165" VerticalAlignment="Top" Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.Column="4" >
            <Grid>
                <CheckBox Content="" IsChecked="{Binding Invoice.ExportToMyOb,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding ExportToMyOBEnabled}" Height="20" Margin="123,132,-2,0" VerticalAlignment="Top"/>
                <Button Content="UPDATE" HorizontalAlignment="Left" VerticalAlignment="Top" Width="50" Height="23" HorizontalContentAlignment="Left" Margin="141,128,-58,0" Command="{Binding ExportToMyObCommand}" CommandParameter="{Binding}" Visibility="{Binding ExportUpdateVisibility}" ToolTip="Update" FontWeight="Medium">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Setter Property="Background" Value="#666666"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="FontSize" Value="10"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type Button}">
                                        <Border Background="{TemplateBinding Background}" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#4c4c4c"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>
        <Label  Content="Invoice Made By" Margin="1,180,0,0" FontFamily="Verdana" HorizontalAlignment="Left" Width="119" Height="24" VerticalAlignment="Top" Grid.Column="4"  />
        <Label  Content="Delivery Docket No" Margin="0,130,0,0" FontFamily="Verdana" HorizontalAlignment="Left" Width="127" Height="24" VerticalAlignment="Top" Grid.Column="4"  />
        <TextBlock x:Name="txtUnit_Copy" Height="23" Margin="127,180,10,0" TextWrapping="Wrap" Text="{Binding Invoice.CompletedBy,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top"  Background="White" RenderTransformOrigin="0.49,0.522" Grid.Column="4" Padding="3,3,0,0"  TextAlignment="Right" />

        <Label  Content="Quote No" Margin="1,80,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" Grid.Column="4" HorizontalAlignment="Left" Width="116"  />
        <TextBlock x:Name="txtUnit_Copy4" Height="23" Margin="127,80,10,0" TextWrapping="Wrap" Text="{Binding Invoice.QuoteNo}" VerticalAlignment="Top"  Background="White" RenderTransformOrigin="0.49,0.522" Grid.Column="4" Padding="3,3,0,0"  TextAlignment="Right" />
        <Label  Content="Sales No" Margin="1,105,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" Grid.Column="4" HorizontalAlignment="Left" Width="116"  />
        <TextBlock x:Name="txtUnit_Copy5" Padding="3,3,0,0"  Height="23" Margin="127,105,10,0" TextWrapping="Wrap" Text="{Binding Invoice.SalesOrderNo}" VerticalAlignment="Top"  Background="White" RenderTransformOrigin="0.49,0.522" Grid.Column="4" TextAlignment="Right" />
        <TextBlock x:Name="txtInvoiceNo" Padding="3,3,0,0"  Height="23" Margin="127,155,10,0" TextWrapping="Wrap" Text="{Binding Invoice.InvoiceNo}" VerticalAlignment="Top"  Background="White" RenderTransformOrigin="0.49,0.522" Grid.Column="4" TextAlignment="Right" />
        <Label  Content="Order date" Margin="5,86,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" HorizontalAlignment="Left" Width="116"  />

        <TextBlock Height="23" Padding="3,3,0,0"   Margin="127,130,10,0" TextWrapping="Wrap" Text="{Binding Invoice.DispatchOrder.DeliveryDocketNo}" VerticalAlignment="Top"  Background="White" RenderTransformOrigin="0.49,0.522" Grid.Column="4" TextAlignment="Right" />
        <Border Margin="5,0,4,6" Height="122" VerticalAlignment="Bottom" Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.ColumnSpan="3"  >
            <TextBox x:Name="cmbCustomers_Copy1" 
        		TabIndex="3"  Padding="0,3,0,0" IsReadOnly="True"
        		Text="{Binding Invoice.FreightCarrier.FreightName}"
        		Background="white" Foreground="Black" FontFamily="Verdana" Margin="125,0,0,89" Height="23" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="353" />
        </Border>
        <Border Margin="5,0,4,130" Height="183" VerticalAlignment="Bottom" Background="#e1e9f7" RenderTransformOrigin="1,1" BorderBrush="#FFC5D0EE" BorderThickness="2,2,2,2" CornerRadius="4,4,4,4" Grid.ColumnSpan="3"  >
            <TextBlock Margin="0,148,6,0" Padding="0,6,5,0" TextAlignment="Right" FontSize="16" Background="#e1e9f7" Foreground="Black" FontFamily="Arial" FontWeight="Bold" Height="28" VerticalAlignment="Top" HorizontalAlignment="Right" Width="117"><Run Text="{Binding Invoice.FreightTotal, StringFormat=\{0:c\}}"/></TextBlock>
        </Border>
        <Label  Content="Carrier Name" Margin="13,0,0,97" FontFamily="Verdana" HorizontalAlignment="Left" Width="119" Height="24" VerticalAlignment="Bottom"  />
        <Label  Content="Terms ID" Margin="14,0,0,72" FontFamily="Verdana" HorizontalAlignment="Left" Width="119" Height="24" VerticalAlignment="Bottom"  />
        <TextBox 
        	x:Name="cmbDispatchTime_Copy2"
        	TabIndex="5"  Padding="0,3,0,0" IsReadOnly="True"
        	Background="White" Foreground="Black" FontFamily="Verdana" Margin="132,0,0,72" Height="23" VerticalAlignment="Bottom" Text="{Binding Invoice.TermsID}" HorizontalAlignment="Left" Width="85" >
        </TextBox>
        <DataGrid x:Name="FreightCode_Datagrid"  BorderBrush="White" HorizontalGridLinesBrush="#FF9C9C9C" VerticalGridLinesBrush="#FF9C9C9C" HorizontalScrollBarVisibility="Disabled" FontFamily="Verdana" 
        	ItemsSource="{Binding Invoice.FreightDetails, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" GotFocus="FreightCode_Datagrid_CellGotFocus" 
        	AutoGenerateColumns="False" Margin="7,0,9,164" Background="#e1e9f7" CanUserAddRows="False"   Grid.ColumnSpan="3" Height="145" VerticalAlignment="Bottom" BorderThickness="0" IsEnabled="{Binding FreightGridEnbaled}" >
            <!--<DataGrid.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"  Color="#FF8F8F8F"/>
            </DataGrid.Resources>-->
            <DataGrid.Columns>
                <!-- Pallets -->
                <DataGridTemplateColumn   Header=" Pallets" Width="Auto" IsReadOnly="False" >
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock  Width="50" Text="{Binding Pallets, Mode=TwoWay}" FontSize="13" FontWeight="Medium" Padding="4,7,2,0" TextAlignment="Right">
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                </DataGridTemplateColumn>
                <!-- Freight Code -->
                <DataGridTextColumn Header="Freight Code" Width="170" Binding="{Binding FreightCodeDetails.Code, Mode=TwoWay, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="Padding" Value="4,7,2,0" />
                            <Setter Property="TextAlignment" Value="Left" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Medium" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Freight Description -->
                <DataGridTextColumn Header="Description" Width="*" IsReadOnly="False" Binding="{Binding FreightCodeDetails.Description, Mode=TwoWay, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="Padding" Value="4,7,2,0" />
                            <Setter Property="TextAlignment" Value="Left" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Medium" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!-- Unit -->
                <DataGridTextColumn Binding="{Binding FreightCodeDetails.Unit, Mode=TwoWay}" Width="75" IsReadOnly="True" Header="   Unit">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="Padding" Value="4,7,2,0" />
                            <Setter Property="TextAlignment" Value="Left" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Medium" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!-- Price -->
                <DataGridTemplateColumn  Width="auto" Header="Price">
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <currency:CurrencyTextBox  Number="{Binding FreightCodeDetails.Price,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" FontSize="13" FontWeight="Medium" Padding="4,7,2,0" TextAlignment="Right" IsEnabled="{Binding FreightCodeDetails.PriceEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="KeyUp" >
                                        <i:InvokeCommandAction Command="{Binding DataContext.FreightPriceKeyUpCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </currency:CurrencyTextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <currency:CurrencyTextBox  Number="{Binding FreightCodeDetails.Price,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" FontSize="13" FontWeight="Medium" Padding="4,7,2,0" TextAlignment="Right" IsEnabled="{Binding FreightCodeDetails.PriceEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="KeyUp" >
                                        <i:InvokeCommandAction Command="{Binding DataContext.FreightPriceKeyUpCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </currency:CurrencyTextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>

                <!-- Discount -->
                <DataGridTextColumn Binding="{Binding Discount, Mode=TwoWay}" Width="auto" IsReadOnly="True" Header="Discount">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="Padding" Value="4,7,2,0" />
                            <Setter Property="TextAlignment" Value="Right" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Medium" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!--Total-->
                <DataGridTemplateColumn  Width="auto" Header="Total" >
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="HorizontalContentAlignment"  Value="Center" />
                            <Setter Property="FontSize" Value="13" />
                            <Setter Property="FontWeight" Value="Bold" />
                        </Style>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <currency:CurrencyTextBox IsEnabled="False"  Number="{Binding Total, Mode=TwoWay, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}" FontSize="13" FontWeight="Medium" Padding="4,7,2,0" TextAlignment="Right" >
                                <i:Interaction.Behaviors>
                                    <Behaviors:TextBoxInputBehavior InputMode="DecimalInput" JustPositivDecimalInput="false" />
                                </i:Interaction.Behaviors>
                            </currency:CurrencyTextBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <TextBlock  Text="Freight Total" Padding="0,4,0,0" TextAlignment="Right" Margin="0,0,132,137" FontFamily="Verdana" Height="24" VerticalAlignment="Bottom" HorizontalAlignment="Right"  Width="164" Grid.ColumnSpan="3"  />
        <Label  Content="Con Note Number" Margin="14,0,0,48" FontFamily="Verdana" HorizontalAlignment="Left" Width="119" Height="24" VerticalAlignment="Bottom"  />
        <TextBox 
        	x:Name="cmbDispatchTime_Copy1"
        	TabIndex="5"  Padding="0,3,0,0" IsReadOnly="True"
        	Background="White" Foreground="Black" FontFamily="Verdana" Margin="132,0,0,48" Height="23" VerticalAlignment="Bottom" Text="{Binding Invoice.DispatchOrder.ConNoteNumber}" HorizontalAlignment="Left" Width="170" Grid.ColumnSpan="2" />
        <Label  Content="Invoice No" Margin="1,155,0,0" FontFamily="Verdana" Height="24" VerticalAlignment="Top" Grid.Column="4" HorizontalAlignment="Left" Width="116"  />
        <Label  Content="Export To MyOb" Margin="1,203,0,0" FontFamily="Verdana" HorizontalAlignment="Left" Width="119" Height="24" VerticalAlignment="Top" Grid.Column="4"  />

    </Grid>
</UserControl>

